<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>JS高级_ReadNotes-chap4 - Amorki&#39;s</title>
    <meta name="author" content="">
    
	<meta name="description" content="&lt;h1 id=&#34;I-基本类型-和-引用类型-的值&#34;&gt;&lt;a href=&#34;#I-基本类型-和-引用类型-的值&#34; class=&#34;headerlink&#34; title=&#34;I 基本类型 和 引用类型 的值&#34;&gt;&lt;/a&gt;I 基本类型 和 引用类型 的值&lt;/h1&gt;&lt;p&gt;变量可能包含两种数据类型的值：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基本类型的值 ：简单的数据段&lt;/li&gt;
&lt;li&gt;引用类型的值：可能由多个值构成的对像，保存在内存中&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;JavaScript不允许直接访问内存中的位置，即不能直接操作对象的内存空间。&lt;/p&gt;
&lt;p&gt;当复制 保存着对象的某个变量时，操作的是对象的引用。&lt;/p&gt;
&lt;p&gt;当为对象添加属性时，操作的才是实际的对象。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;1-动态的属性&#34;&gt;&lt;a href=&#34;#1-动态的属性&#34; class=&#34;headerlink&#34; title=&#34;1. 动态的属性&#34;&gt;&lt;/a&gt;1. 动态的属性&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;定义 基本类型和引用类型的值的方式—-创建一个变量，并为其赋值。&lt;/li&gt;
&lt;li&gt;引用类型的值–可为其添加属性和方法，也可改变和删除属性和方法—–如果对象不被销毁，则属性将一直存在&lt;/li&gt;
&lt;li&gt;基本类型的值 –不能添加属性&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2-复制变量值&#34;&gt;&lt;a href=&#34;#2-复制变量值&#34; class=&#34;headerlink&#34; title=&#34;2. 复制变量值&#34;&gt;&lt;/a&gt;2. 复制变量值&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;复制基本类型的值 –在&lt;strong&gt;变量对象&lt;/strong&gt;上创建一个新值，将该值复制到位新变量分配的位置上。（新旧完全独立）&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlly1ghb610l3zgj30hu095gmg.jpg&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;复制引用类型的值–复制一份放到新变量分配的空间中，但这个副本实际上是一个指针，指向存储在堆中的一个对象。（新旧引用的是同一个对象，二者互相干涉）&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlly1ghb6pej7i6j30rq0hb76j.jpg&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-传递参数&#34;&gt;&lt;a href=&#34;#3-传递参数&#34; class=&#34;headerlink&#34; title=&#34;3. 传递参数&#34;&gt;&lt;/a&gt;3. 传递参数&lt;/h2&gt;&lt;p&gt;ECMAScript中所有参数都是**==按值传递==**。而访问变量有按值和按引用两种方式。&lt;/p&gt;
&lt;p&gt;==把函数外部的一个值赋值给函数内部的参数== == ==把值从一个变量复制到另一个变量==&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;向参数传递基本类型的值–将值复制给一个局部变量（命名参数/arguments对象的一个元素）&lt;/li&gt;
&lt;li&gt;向参数传递引用类型的值–将值的地址复制给一个局部变量，因此&lt;u&gt;这个局部变量的变化会反映在函数的外部&lt;/u&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight js&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;addTen&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;num&lt;/span&gt;)&lt;/span&gt;&amp;#123;  &lt;span class=&#34;comment&#34;&gt;//num:一个局部变量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  num +=&lt;span class=&#34;number&#34;&gt;10&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; num;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; count = &lt;span class=&#34;number&#34;&gt;20&lt;/span&gt;;   &lt;span class=&#34;comment&#34;&gt;//count ：全局变量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; result = addTen(count); &lt;span class=&#34;comment&#34;&gt;//调用函数后，count的20传递给形参num&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(count); &lt;span class=&#34;comment&#34;&gt;//20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(result); &lt;span class=&#34;comment&#34;&gt;//30&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;//num 与 count 互不相识，互不干涉&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight js&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;setName&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;obj&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  obj.name = &lt;span class=&#34;string&#34;&gt;&amp;quot;Nicholas&amp;quot;&lt;/span&gt;;    &lt;span class=&#34;comment&#34;&gt;//obj和person此时引用的是同一个对象&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; person = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;Object&lt;/span&gt;(); &lt;span class=&#34;comment&#34;&gt;//new一个实例对象person，它是全局的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;setName(person);  &lt;span class=&#34;comment&#34;&gt;//将这个对象作参数传递给Object，调用setName函数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(person.name);  &lt;span class=&#34;comment&#34;&gt;//&amp;quot;Nicholas&amp;quot;   函数在内部给添加的name属性，在外部也会被干涉，&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;//person和obj指向的是堆内存中的同一个对象， 而且是全局的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;==即使在参数内部修改了参数的值，原始的引用仍然保持不变==&lt;/li&gt;
&lt;li&gt;当在函数内部重写obj时，这个变量引用的就是一个局部对象了，在函数执行完毕后被立即销毁&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight js&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;setName&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;obj&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  obj.name = &lt;span class=&#34;string&#34;&gt;&amp;quot;Nicholas&amp;quot;&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  obj = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;Object&lt;/span&gt;();  &lt;span class=&#34;comment&#34;&gt;//为obj重新定义了一个对象，&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  obj.name = &lt;span class=&#34;string&#34;&gt;&amp;quot;Greg&amp;quot;&lt;/span&gt;;  &lt;span class=&#34;comment&#34;&gt;//为该对象定义了带有不同值的name属性&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; person = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;Object&lt;/span&gt;(); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;setName(person);  &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(person.name);  &lt;span class=&#34;comment&#34;&gt;//&amp;quot;Nicholas&amp;quot;   说明：这里的person并不是按引用传递&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&#34;4-检测类型&#34;&gt;&lt;a href=&#34;#4-检测类型&#34; class=&#34;headerlink&#34; title=&#34;4. 检测类型&#34;&gt;&lt;/a&gt;4. 检测类型&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;检查基本数据类型–&lt;code&gt;typeof&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;检查引用数据类型–&lt;code&gt;instanceof&lt;/code&gt;  –返回布尔值       所有引用类型的值都是Object实例&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight js&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; s = &lt;span class=&#34;string&#34;&gt;&amp;quot;Nicholas&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; b = &lt;span class=&#34;literal&#34;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; i = &lt;span class=&#34;number&#34;&gt;22&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; u;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; n = &lt;span class=&#34;literal&#34;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; o = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;Object&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(&lt;span class=&#34;keyword&#34;&gt;typeof&lt;/span&gt; s);   &lt;span class=&#34;comment&#34;&gt;//string&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(&lt;span class=&#34;keyword&#34;&gt;typeof&lt;/span&gt; i);   &lt;span class=&#34;comment&#34;&gt;//number&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(&lt;span class=&#34;keyword&#34;&gt;typeof&lt;/span&gt; b);   &lt;span class=&#34;comment&#34;&gt;//Boolean&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(&lt;span class=&#34;keyword&#34;&gt;typeof&lt;/span&gt; u);   &lt;span class=&#34;comment&#34;&gt;//undefined&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(&lt;span class=&#34;keyword&#34;&gt;typeof&lt;/span&gt; n);   &lt;span class=&#34;comment&#34;&gt;//object&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(&lt;span class=&#34;keyword&#34;&gt;typeof&lt;/span&gt; o);   &lt;span class=&#34;comment&#34;&gt;//object&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;result = variable &lt;span class=&#34;keyword&#34;&gt;instanceof&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(person instance of Object);  //变量person是Object吗？&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(colors instance of Array);  //变量colors是Array吗？&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(pattern instance of RegExp);  //变量pattern是RegExp吗？&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h1 id=&#34;II-执行环境及作用域&#34;&gt;&lt;a href=&#34;#II-执行环境及作用域&#34; class=&#34;headerlink&#34; title=&#34;II 执行环境及作用域&#34;&gt;&lt;/a&gt;II 执行环境及作用域&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;执行环境execution context&lt;/code&gt;  定义了 变量或函数有权访问的其他数据，决定了他们各自的行为。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;变量对象variable object&lt;/code&gt;  每个执行环境都有一个与之关联的变量对象，他保存着环境中定义的所有变量和函数。&lt;/p&gt;
&lt;p&gt;全局执行环境—-window对象&lt;/p&gt;
&lt;p&gt;所有全局变量和函数 都是 作为 window对象是属性 和 方法创建的。&lt;/p&gt;
&lt;p&gt;执行环境中的代码全部执行完毕后，该环境会被销毁。&lt;/p&gt;
&lt;p&gt;每个函数都有自己的执行环境。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;执行流&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;环境栈&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;执行流进入函数 → 函数被推倒环境栈中 → 函数执行完毕 → 被推出环境栈 → 被交给之前的执行环境&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;作用域链&lt;/code&gt; 代码在环境中执行时创建，&lt;u&gt;保证&lt;/u&gt; 对执行环境有权访问的变量和函数的 &lt;u&gt;有序访问&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;作用域链 从前往后的顺序： 当前执行环境（函数，活动对象，开始只包含arguments对象） → 外部执行环境 → 下一个外部执行环境 ···· → 全局执行环境&lt;/p&gt;
&lt;p&gt;里面的能访问外面的，外面的不能访问里面的。—这些环境之间的联系是线性的，有序的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;1-延长作用域链&#34;&gt;&lt;a href=&#34;#1-延长作用域链&#34; class=&#34;headerlink&#34; title=&#34;1. 延长作用域链&#34;&gt;&lt;/a&gt;1. 延长作用域链&lt;/h2&gt;&lt;p&gt;一些语句可以在作用域前端临时增加一个变量对象，它会在代码执行后被移除。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;try-catch语句 的 catch块 ：会创建一个新的变量对象，包含被抛出的错误对象的声明。23&lt;/li&gt;
&lt;li&gt;with语句 ：会将指定的变量添加到作用域链中&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2-没有块级作用域&#34;&gt;&lt;a href=&#34;#2-没有块级作用域&#34; class=&#34;headerlink&#34; title=&#34;2. 没有块级作用域&#34;&gt;&lt;/a&gt;2. 没有块级作用域&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;if语句中的变量声明会将变量添加到当前的执行环境（可能是全局环境）&lt;/p&gt;
&lt;p&gt;for语句创建的变量i 在for循环执行结束后，依旧会存在循环外部的执行环境之中&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;2-1-声明变量&#34;&gt;&lt;a href=&#34;#2-1-声明变量&#34; class=&#34;headerlink&#34; title=&#34;2.1 声明变量&#34;&gt;&lt;/a&gt;2.1 声明变量&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;使用var声明的变量会自动被添加到最接近的环境中，&lt;/p&gt;
&lt;p&gt;在函数内部–就是函数的局部环境；&lt;/p&gt;
&lt;p&gt;在with语句中–就是函数环境&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;若初始化变量时没有使用var声明，则该变量会自动被添加到全局环境&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight js&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;add&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;num1, num2&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; sum = num1 +num2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; sum;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; result = add(&lt;span class=&#34;number&#34;&gt;10&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;20&lt;/span&gt;); &lt;span class=&#34;comment&#34;&gt;//30&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(sum); &lt;span class=&#34;comment&#34;&gt;//Error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight js&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;add&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;num1, num2&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    sum = num1 +num2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; sum;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; result = add(&lt;span class=&#34;number&#34;&gt;10&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;20&lt;/span&gt;); &lt;span class=&#34;comment&#34;&gt;//30&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(sum); &lt;span class=&#34;comment&#34;&gt;//30&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;2-2-查询标识符&#34;&gt;&lt;a href=&#34;#2-2-查询标识符&#34; class=&#34;headerlink&#34; title=&#34;2.2 查询标识符&#34;&gt;&lt;/a&gt;2.2 查询标识符&lt;/h3&gt;&lt;figure class=&#34;highlight js&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;var&lt;/span&gt; color =&lt;span class=&#34;string&#34;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;;   &lt;span class=&#34;comment&#34;&gt;//在外面找到了color是blue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;getColor&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; color;  &lt;span class=&#34;comment&#34;&gt;//在里面没找到color，就到到外面去找&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alert(getColor);   &lt;span class=&#34;comment&#34;&gt;//blue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;https://tva1.sinaimg.cn/large/007S8ZIlly1ghbbmodu0tj30bd0b8mxi.jpg&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;III-垃圾收集&#34;&gt;&lt;a href=&#34;#III-垃圾收集&#34; class=&#34;headerlink&#34; title=&#34;III 垃圾收集&#34;&gt;&lt;/a&gt;III 垃圾收集&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;JavaScript有垃圾自动收集机制：执行环境会负责&lt;strong&gt;管理&lt;/strong&gt;&lt;u&gt;代码执行过程中使用&lt;/u&gt;的&lt;strong&gt;内存&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;垃圾自动收集机制の原理：找出不再继续使用的变量，释放他们占用的内存。（以固定的时间间隔，周期性执行）&lt;/p&gt;
&lt;p&gt;函数中局部变量的生命周期—–函数执行的过程&lt;/p&gt;
&lt;p&gt;垃圾收集器会标识无用变量。&lt;/p&gt;
&lt;p&gt;可以使用任何方式标记变量。（翻转特殊的位；使用变量列表跟踪）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;1-标记清除&#34;&gt;&lt;a href=&#34;#1-标记清除&#34; class=&#34;headerlink&#34; title=&#34;1. 标记清除&#34;&gt;&lt;/a&gt;1. 标记清除&lt;/h2&gt;&lt;p&gt;最常用的垃圾收集方式—-标记清除mark-and-sweep&lt;/p&gt;
&lt;p&gt;标记为：“进入环境”（不能清除）→ “离开环境”&lt;/p&gt;
&lt;h2 id=&#34;2-引用计数&#34;&gt;&lt;a href=&#34;#2-引用计数&#34; class=&#34;headerlink&#34; title=&#34;2. 引用计数&#34;&gt;&lt;/a&gt;2. 引用计数&lt;/h2&gt;&lt;p&gt;跟踪记录每个值被引用的次数。—–循环引用问题&lt;/p&gt;
&lt;h2 id=&#34;3-性能问题&#34;&gt;&lt;a href=&#34;#3-性能问题&#34; class=&#34;headerlink&#34; title=&#34;3. 性能问题&#34;&gt;&lt;/a&gt;3. 性能问题&lt;/h2&gt;&lt;h2 id=&#34;4-管理内存&#34;&gt;&lt;a href=&#34;#4-管理内存&#34; class=&#34;headerlink&#34; title=&#34;4. 管理内存&#34;&gt;&lt;/a&gt;4. 管理内存&lt;/h2&gt;&lt;p&gt;内存限制问题&lt;/p&gt;
&lt;p&gt;解除引用dereferencing&lt;/p&gt;
"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="Amorki&#39;s" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

<meta name="generator" content="Hexo 5.0.0"></head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Amorki&#39;s
    </div>
</h1>
<span class="subtitle"></span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
    
        <!-- GitHub -->
        <li>
            <a target="_blank" rel="noopener" href="https://github.com/amorkiki" class="github" title="Github"></a>
        </li>
        
            
                    
                        <!-- Facebook -->
                        <li>
                            <a target="_blank" rel="noopener" href="http://www.facebook.com/kiki.wu.92167789" class="facebook" title="Facebook"></a>
                        </li>
                        
                            
                                <!-- Twitter -->
                                <li>
                                    <a target="_blank" rel="noopener" href="http://www.twitter.com/BENICEXKiki" class="twitter" title="Twitter"></a>
                                </li>
                                
                                    
                                            
                                                    
                                                            
                                                                <!-- Instagram -->
                                                                <li>
                                                                    <a target="_blank" rel="noopener" href="http://www.instagram.com/wuuuuuujt" class="instagram" title="Instagram"></a>
                                                                </li>

                                                                
</ul>

<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
	<li id="ajax"><a href="/tags/index.html">Tags</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="http://yoursite.com" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        <article class="post">
	<h2 class="title">JS高级_ReadNotes-chap4</h2>
    <div class="meta">
        <div class="date">Published on: <time datetime="2019-05-01T06:08:38.000Z" itemprop="datePublished">May 1, 2019</time>
</div>
        <div class="tags">Tags: 

<a href="/tags/ReadNotes/">ReadNotes</a> <a href="/tags/JavaScript/">JavaScript</a>
</div>
    </div>
	<div class="entry-content"><h1 id="I-基本类型-和-引用类型-的值"><a href="#I-基本类型-和-引用类型-的值" class="headerlink" title="I 基本类型 和 引用类型 的值"></a>I 基本类型 和 引用类型 的值</h1><p>变量可能包含两种数据类型的值：</p>
<ul>
<li>基本类型的值 ：简单的数据段</li>
<li>引用类型的值：可能由多个值构成的对像，保存在内存中</li>
</ul>
<blockquote>
<p>JavaScript不允许直接访问内存中的位置，即不能直接操作对象的内存空间。</p>
<p>当复制 保存着对象的某个变量时，操作的是对象的引用。</p>
<p>当为对象添加属性时，操作的才是实际的对象。</p>
</blockquote>
<h2 id="1-动态的属性"><a href="#1-动态的属性" class="headerlink" title="1. 动态的属性"></a>1. 动态的属性</h2><ul>
<li>定义 基本类型和引用类型的值的方式—-创建一个变量，并为其赋值。</li>
<li>引用类型的值–可为其添加属性和方法，也可改变和删除属性和方法—–如果对象不被销毁，则属性将一直存在</li>
<li>基本类型的值 –不能添加属性</li>
</ul>
<h2 id="2-复制变量值"><a href="#2-复制变量值" class="headerlink" title="2. 复制变量值"></a>2. 复制变量值</h2><ul>
<li><p>复制基本类型的值 –在<strong>变量对象</strong>上创建一个新值，将该值复制到位新变量分配的位置上。（新旧完全独立）</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghb610l3zgj30hu095gmg.jpg"></p>
</li>
<li><p>复制引用类型的值–复制一份放到新变量分配的空间中，但这个副本实际上是一个指针，指向存储在堆中的一个对象。（新旧引用的是同一个对象，二者互相干涉）</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghb6pej7i6j30rq0hb76j.jpg"></p>
</li>
</ul>
<h2 id="3-传递参数"><a href="#3-传递参数" class="headerlink" title="3. 传递参数"></a>3. 传递参数</h2><p>ECMAScript中所有参数都是**==按值传递==**。而访问变量有按值和按引用两种方式。</p>
<p>==把函数外部的一个值赋值给函数内部的参数== == ==把值从一个变量复制到另一个变量==</p>
<ul>
<li>向参数传递基本类型的值–将值复制给一个局部变量（命名参数/arguments对象的一个元素）</li>
<li>向参数传递引用类型的值–将值的地址复制给一个局部变量，因此<u>这个局部变量的变化会反映在函数的外部</u>。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTen</span>(<span class="params">num</span>)</span>&#123;  <span class="comment">//num:一个局部变量</span></span><br><span class="line">  num +=<span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> count = <span class="number">20</span>;   <span class="comment">//count ：全局变量</span></span><br><span class="line"><span class="keyword">var</span> result = addTen(count); <span class="comment">//调用函数后，count的20传递给形参num</span></span><br><span class="line">alert(count); <span class="comment">//20</span></span><br><span class="line">alert(result); <span class="comment">//30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//num 与 count 互不相识，互不干涉</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  obj.name = <span class="string">&quot;Nicholas&quot;</span>;    <span class="comment">//obj和person此时引用的是同一个对象</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>(); <span class="comment">//new一个实例对象person，它是全局的</span></span><br><span class="line">setName(person);  <span class="comment">//将这个对象作参数传递给Object，调用setName函数</span></span><br><span class="line">alert(person.name);  <span class="comment">//&quot;Nicholas&quot;   函数在内部给添加的name属性，在外部也会被干涉，</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//person和obj指向的是堆内存中的同一个对象， 而且是全局的</span></span><br></pre></td></tr></table></figure>

<ul>
<li>==即使在参数内部修改了参数的值，原始的引用仍然保持不变==</li>
<li>当在函数内部重写obj时，这个变量引用的就是一个局部对象了，在函数执行完毕后被立即销毁</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  obj.name = <span class="string">&quot;Nicholas&quot;</span>; </span><br><span class="line">  obj = <span class="keyword">new</span> <span class="built_in">Object</span>();  <span class="comment">//为obj重新定义了一个对象，</span></span><br><span class="line">  obj.name = <span class="string">&quot;Greg&quot;</span>;  <span class="comment">//为该对象定义了带有不同值的name属性</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>(); </span><br><span class="line">setName(person);  </span><br><span class="line">alert(person.name);  <span class="comment">//&quot;Nicholas&quot;   说明：这里的person并不是按引用传递</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="4-检测类型"><a href="#4-检测类型" class="headerlink" title="4. 检测类型"></a>4. 检测类型</h2><ul>
<li>检查基本数据类型–<code>typeof</code></li>
<li>检查引用数据类型–<code>instanceof</code>  –返回布尔值       所有引用类型的值都是Object实例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;Nicholas&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">22</span>;</span><br><span class="line"><span class="keyword">var</span> u;</span><br><span class="line"><span class="keyword">var</span> n = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">        </span><br><span class="line">alert(<span class="keyword">typeof</span> s);   <span class="comment">//string</span></span><br><span class="line">alert(<span class="keyword">typeof</span> i);   <span class="comment">//number</span></span><br><span class="line">alert(<span class="keyword">typeof</span> b);   <span class="comment">//Boolean</span></span><br><span class="line">alert(<span class="keyword">typeof</span> u);   <span class="comment">//undefined</span></span><br><span class="line">alert(<span class="keyword">typeof</span> n);   <span class="comment">//object</span></span><br><span class="line">alert(<span class="keyword">typeof</span> o);   <span class="comment">//object</span></span><br><span class="line"></span><br><span class="line">result = variable <span class="keyword">instanceof</span> <span class="keyword">constructor</span></span><br><span class="line">alert(person instance of Object);  //变量person是Object吗？</span><br><span class="line">alert(colors instance of Array);  //变量colors是Array吗？</span><br><span class="line">alert(pattern instance of RegExp);  //变量pattern是RegExp吗？</span><br></pre></td></tr></table></figure>



<h1 id="II-执行环境及作用域"><a href="#II-执行环境及作用域" class="headerlink" title="II 执行环境及作用域"></a>II 执行环境及作用域</h1><blockquote>
<p><code>执行环境execution context</code>  定义了 变量或函数有权访问的其他数据，决定了他们各自的行为。</p>
<p><code>变量对象variable object</code>  每个执行环境都有一个与之关联的变量对象，他保存着环境中定义的所有变量和函数。</p>
<p>全局执行环境—-window对象</p>
<p>所有全局变量和函数 都是 作为 window对象是属性 和 方法创建的。</p>
<p>执行环境中的代码全部执行完毕后，该环境会被销毁。</p>
<p>每个函数都有自己的执行环境。</p>
<p><code>执行流</code></p>
<p><code>环境栈</code></p>
<p>执行流进入函数 → 函数被推倒环境栈中 → 函数执行完毕 → 被推出环境栈 → 被交给之前的执行环境</p>
</blockquote>
<blockquote>
<p><code>作用域链</code> 代码在环境中执行时创建，<u>保证</u> 对执行环境有权访问的变量和函数的 <u>有序访问</u></p>
<p>作用域链 从前往后的顺序： 当前执行环境（函数，活动对象，开始只包含arguments对象） → 外部执行环境 → 下一个外部执行环境 ···· → 全局执行环境</p>
<p>里面的能访问外面的，外面的不能访问里面的。—这些环境之间的联系是线性的，有序的</p>
</blockquote>
<h2 id="1-延长作用域链"><a href="#1-延长作用域链" class="headerlink" title="1. 延长作用域链"></a>1. 延长作用域链</h2><p>一些语句可以在作用域前端临时增加一个变量对象，它会在代码执行后被移除。</p>
<ul>
<li>try-catch语句 的 catch块 ：会创建一个新的变量对象，包含被抛出的错误对象的声明。23</li>
<li>with语句 ：会将指定的变量添加到作用域链中</li>
</ul>
<h2 id="2-没有块级作用域"><a href="#2-没有块级作用域" class="headerlink" title="2. 没有块级作用域"></a>2. 没有块级作用域</h2><blockquote>
<p>if语句中的变量声明会将变量添加到当前的执行环境（可能是全局环境）</p>
<p>for语句创建的变量i 在for循环执行结束后，依旧会存在循环外部的执行环境之中</p>
</blockquote>
<h3 id="2-1-声明变量"><a href="#2-1-声明变量" class="headerlink" title="2.1 声明变量"></a>2.1 声明变量</h3><blockquote>
<p>使用var声明的变量会自动被添加到最接近的环境中，</p>
<p>在函数内部–就是函数的局部环境；</p>
<p>在with语句中–就是函数环境</p>
</blockquote>
<ul>
<li>若初始化变量时没有使用var声明，则该变量会自动被添加到全局环境</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num1, num2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sum = num1 +num2;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = add(<span class="number">10</span>, <span class="number">20</span>); <span class="comment">//30</span></span><br><span class="line">alert(sum); <span class="comment">//Error</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num1, num2</span>)</span>&#123;</span><br><span class="line">    sum = num1 +num2;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = add(<span class="number">10</span>, <span class="number">20</span>); <span class="comment">//30</span></span><br><span class="line">alert(sum); <span class="comment">//30</span></span><br></pre></td></tr></table></figure>



<h3 id="2-2-查询标识符"><a href="#2-2-查询标识符" class="headerlink" title="2.2 查询标识符"></a>2.2 查询标识符</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> color =<span class="string">&quot;blue&quot;</span>;   <span class="comment">//在外面找到了color是blue</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getColor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> color;  <span class="comment">//在里面没找到color，就到到外面去找</span></span><br><span class="line">&#125;</span><br><span class="line">alert(getColor);   <span class="comment">//blue</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghbbmodu0tj30bd0b8mxi.jpg"></p>
<h1 id="III-垃圾收集"><a href="#III-垃圾收集" class="headerlink" title="III 垃圾收集"></a>III 垃圾收集</h1><blockquote>
<p>JavaScript有垃圾自动收集机制：执行环境会负责<strong>管理</strong><u>代码执行过程中使用</u>的<strong>内存</strong>。</p>
<p>垃圾自动收集机制の原理：找出不再继续使用的变量，释放他们占用的内存。（以固定的时间间隔，周期性执行）</p>
<p>函数中局部变量的生命周期—–函数执行的过程</p>
<p>垃圾收集器会标识无用变量。</p>
<p>可以使用任何方式标记变量。（翻转特殊的位；使用变量列表跟踪）</p>
</blockquote>
<h2 id="1-标记清除"><a href="#1-标记清除" class="headerlink" title="1. 标记清除"></a>1. 标记清除</h2><p>最常用的垃圾收集方式—-标记清除mark-and-sweep</p>
<p>标记为：“进入环境”（不能清除）→ “离开环境”</p>
<h2 id="2-引用计数"><a href="#2-引用计数" class="headerlink" title="2. 引用计数"></a>2. 引用计数</h2><p>跟踪记录每个值被引用的次数。—–循环引用问题</p>
<h2 id="3-性能问题"><a href="#3-性能问题" class="headerlink" title="3. 性能问题"></a>3. 性能问题</h2><h2 id="4-管理内存"><a href="#4-管理内存" class="headerlink" title="4. 管理内存"></a>4. 管理内存</h2><p>内存限制问题</p>
<p>解除引用dereferencing</p>
</div>

<div class="meta">
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>




    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2020

    JTW
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a target="_blank" rel="noopener" href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a target="_blank" rel="noopener" href="http://github.com/panks/fabric">fabric</a> by <a target="_blank" rel="noopener" href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
